05/28/2024 01:54:42 PM - microservice_utils.settings - INFO - Starting kafka connection
05/28/2024 01:54:42 PM - botocore.credentials - INFO - Found credentials in shared credentials file: ~/.aws/credentials
05/28/2024 01:54:43 PM - microservice_utils.settings - INFO - Database Initialized
05/28/2024 01:54:43 PM - microservice_utils.settings - INFO - Starting Flask server
05/28/2024 01:54:43 PM - microservice_utils.settings - INFO - Initialize kafka: 192.168.37.14:9092 Liteon_EI_Kafka Liteon_EI_Kafka
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO - Cluster gc9AfiGdQmuOfWeaYirJhA metadata (response from broker 192.168.37.14:9092/0):
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  1 brokers:
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   192.168.37.14:9092/0  (controller)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  30 topics:
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "__transaction_state" with 50 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "RemoteControlRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "LocalAuthorizationRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-reservation" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "__consumer_offsets" with 50 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "ISO15118Request" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "ProvisioningRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "AvailabilityRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-log-ocpp-message" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "CreateOrder" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-evse-output" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "DriverVerificationResponse" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "RejectOrder" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "DriverVerificationRequest" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-evse" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "ReservationRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-order-output" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "SecurityRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "AuthorizeResponse" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "AuthorizeRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "CancelPaymentRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "RemoteControlResponse" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "AuthorizePaymentResponse" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "OneEMSMessageLog" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "DiagnosticsRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "DataTransferRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-order" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "ReservationResponse" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "SmartChargingRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "FirmwareRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  3 consumer groups
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  "csms_consumer" with 1 member(s), protocol: roundrobin, protocol_type: consumer
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  "ms_order_service" with 2 member(s), protocol: range, protocol_type: consumer
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  "ms_ev_driver_management" with 2 member(s), protocol: range, protocol_type: consumer
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO - === Starting Consume-Transform-Process loop ===
05/28/2024 01:54:43 PM - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:7031
 * Running on http://192.168.37.17:7031
05/28/2024 01:54:43 PM - werkzeug - INFO - [33mPress CTRL+C to quit[0m
05/28/2024 01:54:43 PM - werkzeug - INFO -  * Restarting with stat
05/28/2024 01:54:43 PM - microservice_utils.settings - INFO - Starting kafka connection
05/28/2024 01:54:43 PM - botocore.credentials - INFO - Found credentials in shared credentials file: ~/.aws/credentials
05/28/2024 01:54:43 PM - microservice_utils.settings - INFO - Database Initialized
05/28/2024 01:54:43 PM - microservice_utils.settings - INFO - Starting Flask server
05/28/2024 01:54:43 PM - microservice_utils.settings - INFO - Initialize kafka: 192.168.37.14:9092 Liteon_EI_Kafka Liteon_EI_Kafka
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO - Cluster gc9AfiGdQmuOfWeaYirJhA metadata (response from broker 192.168.37.14:9092/0):
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  1 brokers:
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   192.168.37.14:9092/0  (controller)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  30 topics:
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "__transaction_state" with 50 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "RemoteControlRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "LocalAuthorizationRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-reservation" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "__consumer_offsets" with 50 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "ISO15118Request" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "ProvisioningRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "AvailabilityRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-log-ocpp-message" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "CreateOrder" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-evse-output" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "DriverVerificationResponse" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "RejectOrder" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "DriverVerificationRequest" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-evse" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "ReservationRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-order-output" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "SecurityRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "AuthorizeResponse" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "AuthorizeRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "CancelPaymentRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "RemoteControlResponse" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "AuthorizePaymentResponse" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "OneEMSMessageLog" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "DiagnosticsRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "DataTransferRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "csms-order" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "ReservationResponse" with 3 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "SmartChargingRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -   "FirmwareRequest" with 1 partition(s)
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  3 consumer groups
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  "csms_consumer" with 1 member(s), protocol: roundrobin, protocol_type: consumer
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  "ms_order_service" with 3 member(s), protocol: , protocol_type: consumer
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO -  "ms_ev_driver_management" with 2 member(s), protocol: range, protocol_type: consumer
05/28/2024 01:54:43 PM - ms_tools.kafka_management.kafka_app - INFO - === Starting Consume-Transform-Process loop ===
05/28/2024 01:54:43 PM - werkzeug - WARNING -  * Debugger is active!
05/28/2024 01:54:43 PM - werkzeug - INFO -  * Debugger PIN: 940-417-292
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of CreateOrder [0] at 2====
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of CreateOrder [1] at 2====
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of DriverVerificationResponse [0] at 58====
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Processing message at input offset 2 ===
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - Handling message: None RejectOrder {'request_id': 'req-MUserA-1'} {"meta": {"request_id": "req-MUserA-1", "timestamp": "2024-05-28 08:39:39", "producer": "Order Service", "version": "1.0.0", "type": "CancelReservation", "action": "ReserveNow"}, "evse": {"charge_point_id": "test_add_evse1", "subprotocol": "ocpp1.6"}, "data": {"connector_id": 0, "id_tag": "MUserA", "meter_start": 1000, "timestamp": "2021-09-01 00:00:00", "reservation_id": 0, "trigger_method": "cancel_order", "start_time": "2021-09-01 00:00:00", "requires_payment": false, "transaction_id": 378, "is_reservation": null, "is_charging": false, "tenant_id": null, "status_code": 409, "mobile_id": "MUserA", "id_tag_status": "ConcurrentTx"}}
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - request_id: req-MUserA-1
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - validate: {'error_description': {}}
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - Validation Passed
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - #############################################
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - Updating order: {'meta': {'request_id': 'req-MUserA-1', 'timestamp': '2024-05-28 08:39:39', 'producer': 'Order Service', 'version': '1.0.0', 'type': 'CancelReservation', 'action': 'ReserveNow'}, 'evse': {'charge_point_id': 'test_add_evse1', 'subprotocol': 'ocpp1.6'}, 'data': {'connector_id': 0, 'id_tag': 'MUserA', 'meter_start': 1000, 'timestamp': '2021-09-01 00:00:00', 'reservation_id': 0, 'trigger_method': 'cancel_order', 'start_time': '2021-09-01 00:00:00', 'requires_payment': False, 'transaction_id': 378, 'is_reservation': None, 'is_charging': False, 'tenant_id': None, 'status_code': 409, 'mobile_id': 'MUserA', 'id_tag_status': 'ConcurrentTx'}}
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - order_exist: <Order 378>
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - old_status: Cancelled
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - transaction_exists exist: <Transaction 378>
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - Charging ind: False
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - Reservation ind: False
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - old_status: Cancelled
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - new_status: Cancelled
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - Transaction detail: Order created for make_reservation.make_reservation Initated. Order status updated from Created to AuthorizationFailed from AuthorizeResponse.cancel_order Initated. Order status updated from AuthorizationFailed to Cancelled from CancelReservation.cancel_order Initated. Order status updated from Cancelled to Cancelled from CancelReservation.cancel_order Initated. Order status updated from Cancelled to Cancelled from CancelReservation.cancel_order Initated. Order status updated from Cancelled to Cancelled from CancelReservation.
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - producer: Order Service
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - trigger_method: cancel_order
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - order_status: Cancelled
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - data: {'meta': {'request_id': 'req-MUserA-1', 'timestamp': '2024-05-28 08:39:39', 'producer': 'Order Service', 'version': '1.0.0', 'type': 'CancelReservation', 'action': 'ReserveNow'}, 'evse': {'charge_point_id': 'test_add_evse1', 'subprotocol': 'ocpp1.6'}, 'data': {'connector_id': 0, 'id_tag': 'MUserA', 'meter_start': 1000, 'timestamp': '2021-09-01 00:00:00', 'reservation_id': 0, 'trigger_method': 'cancel_order', 'start_time': '2021-09-01 00:00:00', 'requires_payment': False, 'transaction_id': 378, 'is_reservation': False, 'is_charging': False, 'tenant_id': None, 'status_code': 409, 'mobile_id': 'MUserA', 'id_tag_status': 'ConcurrentTx'}}
05/28/2024 01:55:27 PM - microservice_utils.settings - INFO - Kafka topic: None
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of RejectOrder [1] at 6====
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of ReservationResponse [0] at 3====
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of ReservationResponse [1] at 1====
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of CreateOrder [2] at 8====
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of ReservationResponse [2] at 3====
05/28/2024 01:55:27 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of RejectOrder [0] at 4====
05/28/2024 01:55:28 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of AuthorizePaymentResponse [2] at 0====
05/28/2024 01:55:28 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of RejectOrder [2] at 0====
05/28/2024 01:55:28 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached end of input ===
05/28/2024 01:55:28 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of AuthorizePaymentResponse [1] at 0====
05/28/2024 01:55:28 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached the end of AuthorizePaymentResponse [0] at 0====
05/28/2024 01:55:28 PM - ms_tools.kafka_management.kafka_app - INFO - === Reached end of input ===
05/28/2024 02:01:18 PM - werkzeug - INFO -  * Detected change in '/home/cxe/Project/one ems/ms_order_service/flask_app/services/update_order.py', reloading
